---
import LeaguePage from '../components/LeaguePage.astro';
import { loadLeaguesConfig, loadLeagueStandings } from '../utils/data';
import { getTournamentMetadata } from '../utils/tournamentData';
import type { TournamentMetadata } from '../types';

const config = loadLeaguesConfig();
const allLeagues = config.leagues;
const firstLeague = allLeagues[0];

// Load standings for the first league
const standings = loadLeagueStandings(firstLeague.name);

// Load tournament metadata for the first league
const tournamentMetadata: TournamentMetadata[] = firstLeague.tournaments
  .map((id) => getTournamentMetadata(id))
  .filter((meta): meta is TournamentMetadata => meta !== null);
---

<LeaguePage
  currentLeague={firstLeague}
  allLeagues={allLeagues}
  isOverall={false}
  standings={standings}
  tournaments={tournamentMetadata}
/>
